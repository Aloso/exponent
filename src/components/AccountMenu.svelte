<script lang="ts">
	interface Props {
		onNameChange: () => void
		onLogout: () => void
	}

	let { onNameChange, onLogout }: Props = $props()

	let open = $state(false)
</script>

<div class:menu={open}>
	<div class="menu-button-wrapper">
		<button class="header-action-button" aria-label="Menü" onclick={() => (open = !open)}>
			<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
				<g style="fill:#ffffff">
					<rect width="12" height="2" x="2" y="2" rx="1" />
					<rect width="12" height="2" x="2" y="12" rx="1" />
					<rect width="12" height="2" x="2" y="7" rx="1" />
				</g>
			</svg>
		</button>
	</div>

	{#if open}
		<button
			class="item"
			onclick={() => {
				onLogout()
				open = false
			}}
		>
			Logout
			<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
				<path
					style="fill:#ffffff"
					d="M 8 1 C 4.686 1 2 3.686 2 7 L 2 14 C 2 14.554 2.446 15 3 15 L 9.5 15 L 9.5 1.189 C 9.02 1.066 8.518 1 8 1 z M 10.5 1.5449219 L 10.5 15 L 13 15 C 13.554 15 14 14.554 14 14 L 14 7 C 14 4.5785056 12.56553 2.4929292 10.5 1.5449219 z M 3.5 8.5 L 5.5 8.5 C 5.777 8.5 6 8.723 6 9 C 6 9.277 5.777 9.5 5.5 9.5 L 3.5 9.5 C 3.223 9.5 3 9.277 3 9 C 3 8.723 3.223 8.5 3.5 8.5 z "
				/>
			</svg>
		</button>
		<button
			class="item"
			onclick={() => {
				onNameChange()
				open = false
			}}
		>
			Name ändern
			<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
				<path
					style="fill:#ffffff"
					width="12"
					height="4"
					x="4.3137083"
					y="-2"
					transform="rotate(45)"
					d="M 4.972,-2 H 16.314 V 2 H 4.906 A 0.592,0.592 45 0 1 4.314,1.408 V -1.342 A 0.658,0.658 135 0 1 4.972,-2 Z"
				/>
				<path
					style="fill:#ffffff"
					d="m 13.656854,10.828427 -2.828427,2.828427 3.535534,0.707107 z"
				/>
			</svg>
		</button>
		<a class="button item" href="/account/code-of-conduct">
			Verhaltensregeln
			<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
				<path
					style="fill:#ffffff"
					d="M 2.6992188 2 C 2.3114188 2 2 2.3114188 2 2.6992188 L 2 13.300781 C 2 13.688581 2.3114188 14 2.6992188 14 L 9.3007812 14 C 9.6885812 14 10 13.688581 10 13.300781 L 10 10.746094 C 9.9305949 10.804534 9.8544008 10.862157 9.7617188 10.919922 C 9.5808629 11.032636 9.2679278 11.253657 8.7246094 11.066406 C 8.1812918 10.879155 8.0710529 10.51271 7.9980469 10.3125 C 7.9250412 10.11229 7.8999051 9.9502221 7.8769531 9.78125 C 7.8310501 9.4433057 7.8172456 9.0862048 7.8066406 8.7324219 C 7.7960356 8.3786389 7.7904236 8.0318015 7.7753906 7.7832031 C 7.7751706 7.7795656 7.7738124 7.7774987 7.7734375 7.7753906 C 7.7732675 7.7741609 7.7735527 7.7693556 7.7734375 7.7675781 C 7.7672955 7.7648781 7.7660556 7.7644487 7.7597656 7.7617188 C 7.531357 7.6624381 7.2076524 7.5374021 6.8789062 7.40625 C 6.5501601 7.2750979 6.2197429 7.1413112 5.9179688 6.9824219 C 5.7670818 6.9029772 5.6240267 6.8227176 5.4609375 6.6855469 C 5.2978484 6.5483762 4.9898083 6.31873 5 5.7441406 C 5.0101918 5.1695512 5.3262894 4.9516131 5.4941406 4.8203125 C 5.6619917 4.6890119 5.807328 4.6150593 5.9609375 4.5410156 C 6.2681567 4.3929283 6.6043096 4.2698016 6.9375 4.1503906 C 7.2706905 4.0309797 7.5982891 3.9172891 7.8300781 3.8261719 C 7.8365201 3.8236419 7.83746 3.8228125 7.84375 3.8203125 C 7.84437 3.8140505 7.8450887 3.8130306 7.8457031 3.8066406 C 7.8695421 3.5587317 7.8889644 3.2106062 7.9121094 2.8574219 C 7.9310077 2.5690391 7.9501622 2.2796837 7.9882812 2 L 2.6992188 2 z M 9.859375 3.6640625 C 9.8514141 3.775344 9.8460975 3.8923473 9.8359375 3.9980469 C 9.8205775 4.1578265 9.8027544 4.3060773 9.7714844 4.4628906 C 9.7402114 4.6197039 9.7560511 4.765752 9.5175781 5.0820312 C 9.2791041 5.3983105 9.1343471 5.4248415 8.9921875 5.4980469 C 8.8500275 5.5712522 8.7118881 5.6287736 8.5625 5.6875 C 8.4630885 5.7265799 8.3515379 5.7642476 8.2460938 5.8027344 C 8.349565 5.8447267 8.4591689 5.8853671 8.5566406 5.9277344 C 8.703852 5.9917217 8.8409945 6.0546117 8.9804688 6.1328125 C 9.1199433 6.2110133 9.2631274 6.2418687 9.4902344 6.5664062 C 9.7173414 6.8909436 9.6989133 7.0355351 9.7246094 7.1933594 C 9.7502994 7.3511831 9.7617844 7.5018853 9.7714844 7.6621094 C 9.7779044 7.7681 9.7792031 7.8846033 9.7832031 7.9960938 C 9.855015 7.9107845 9.9277269 7.8197354 9.9980469 7.7402344 L 10 7.7382812 L 10 3.8476562 C 9.9531595 3.7874382 9.9065896 3.724372 9.859375 3.6640625 z "
				/>
				<path
					style="fill:#ffffff"
					d="M 9.0500699,10.121319 C 8.6807406,9.9940315 8.8947409,7.4604274 8.6707644,7.1403635 8.4467878,6.8202995 5.9931623,6.1534649 6.0000903,5.7628776 6.0070184,5.3722903 8.4827489,4.7928901 8.7179352,4.4809705 8.9531216,4.1690509 8.829107,1.6294513 9.2027189,1.5153421 9.5763299,1.4012329 10.892415,3.5767479 11.261745,3.704035 c 0.36933,0.127287 2.74631,-0.7754372 2.970286,-0.4553733 0.223977,0.3200639 -1.438368,2.2440064 -1.445296,2.6345937 -0.0069,0.3905873 1.586141,2.3722727 1.350955,2.6841923 C 13.902503,8.8793672 11.559032,7.892914 11.185421,8.0070232 10.811809,8.1211324 9.4193999,10.248606 9.0500699,10.121319 Z"
				/>
			</svg>
		</a>
	{/if}
</div>

<style lang="scss">
	.menu {
		position: absolute;
		right: 0;
		top: 0;
		width: 14rem;
		max-width: 80vw;
		padding-bottom: 0.75rem;
		background-color: #420142;
		display: flex;
		flex-direction: column;
		align-items: end;
		border-radius: 0 0 1rem 1rem;
		animation: get-down 0.5s;
		overflow: hidden;
		box-shadow: inset 0.1rem -0.1rem 0 #0002;

		@keyframes get-down {
			0% {
				max-height: 0;
			}
			100% {
				max-height: 16rem;
			}
		}

		.menu-button-wrapper {
			height: 4.5rem;
			min-height: 4.5rem;
			display: flex;
			align-items: center;
		}

		.header-action-button {
			margin: 0 calc(5vw - 0.5rem);

			@media (min-width: 66.66667dvh) {
				margin: 0 1rem;
			}
		}
	}

	.item {
		padding-block: 1rem;
		font-size: 1.1rem;
		display: flex;
		align-items: center;
		margin: 0 0.5rem;
		cursor: pointer;

		svg {
			height: 24px;
			width: auto;
			margin-left: 0.5rem;
		}
	}
</style>
